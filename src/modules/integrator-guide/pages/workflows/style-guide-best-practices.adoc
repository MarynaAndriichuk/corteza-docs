include::ROOT:partial$variables.adoc[]

= Style guide and best practices
:description: @todo
:keywords: @todo

== Style guide

[NOTE]
====
*DevNote* todo
====

== Best practices

=== Define as many trigger constraints as sanity allows

If you click on the cog icon image:workflow/cog.svg[width=20px] in the header of the trigger, you will see that you can define multiple trigger constraints.

When you define a "loose trigger" you can run into a problem where some events may trigger the workflow even though they shouldn't.

An example of this is the case module in our CRM and in our Service Solution.
Defining a trigger with these constraints:

image:workflow/bp-constraints-no.png[]

would cause the workflow to execute regardless if the case was created in the CRM or in the Service Solution.

To fix this edge-case, we can define an extra constraint that checks the namespace:

image:workflow/bp-constraints-yes.png[]

=== One expression step can have multiple expressions

If you click on the cog icon image:workflow/cog.svg[width=20px] in the header of the expression step, you will see that you can add multiple expressions.

Use this to reduce the number of expression steps, but don't go overboard.
If you wish to change the values of a contact and an account record, define only two expression steps where each focuses only on one record.

.An overengineered example:
image:workflow/bp-compact-no.png[]

Impressive, right?
The above could easily be rewritten into the below.

.What it should be:
image:workflow/bp-compact-yes.png[]

=== Most iterators can load and process data

xref:workflows/index.adoc#iterator-kind-item[Item iterators] that work with system resources ({PRODUCT_NAME} {APP_NAME_COMPOSE} records, system users and roles) can both fetch and process the data.

If you need to iterate over external resources (for example, social media posts), you will need to fetch those beforehand.

Knowing this, we can rewrite this:

image:workflow/bp-iterator-fetch-no.png[]

into

image:workflow/bp-iterator-fetch-yes.png[]

It might not seem that significant, but it does add up.

=== Use handles whenever possible

Most resources allow you to define a human-friendly identifier next to the system generated identifier (a handle or a slug in case of a namespace).

These identifiers make it easier to write workflows that will work across different instances where the identifier may not be the same.
Readability is also increased; it's easier to `lead` as an identifier to the lead module instead of  `12897612987021`.
