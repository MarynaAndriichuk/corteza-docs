= Corteza-js
This package includes the javascript/typescript libraries used across {PRODUCT_NAME} web applications and automation scripts.
Since the different {PRODUCT_NAME} web applications use different libraries, only specific parts of the package are imported when needed.

The package includes, but is not limited to::
 - API Clients
 - {APP_AUTOMATION} helpers
 - Types

== API Clients
Instead of using a single API client that provides all the necessary endpoints, the client is split into sub-clients, each responsible for a certain resource. This is done for easier readability and maintainability of the API.

The API clients are auto-generated by using `yarn codegen:corteza-api-client` when located in the corteza-js directory. By running this command, the API clients are generated based on the {PRODUCT_NAME} Server which is assumed to be in the same directory as the corteza-js package.

Communication between the {PRODUCT_NAME} web applications and {PRODUCT_NAME} Server is performed entirely through these API clients.

The available API clients are::
  - System (users, roles, system permissions...)
  - Compose (managing records, modules, namespaces, charts, compose permissions...)
  - Federation (federating records/modules, federation permissions...)
  - Messaging (managing channels, messages, messaging permissions...)

[NOTE]
====
All of the above API clients are located in the `corteza-js/api-clients` directory.
====


== {APP_AUTOMATION} Helpers
As the name implies, they are used to help with the writing of automation scripts.
Instead of calling the specific API client endpoints to perform a task, the helpers introduce an abstract layer between the API clients and the automation script. 

For example, instead of directly calling the Compose API `recordCreate` or `recordUpdate` endpoint based on if the record is new or existing. You can instead use the Compose {APP_AUTOMATION} helper `saveRecord` that automatically determines if the record is new or not and calls the proper Compose API endpoint.

The use of {APP_AUTOMATION} prevents possible bugs that could occur when using only the API client endpoints.
That is why the usage of {APP_AUTOMATION} helpers is highly encouraged.

Similar to API clients, the helpers are split up into smaller chunks::
 - System
 - Compose
 - Messaging

[NOTE]
====
All of the above API clients are located in the `corteza-js/corredor/helpers` directory.
====

== Types
To ensure that the proper types are passed to the API a set of Typescript classes is defined. These are used in {PRODUCT_NAME} web applications, automation scripts and corteza-vue components.

For example, when creating a new record via the `saveRecord` {APP_AUTOMATION} helper. The helper expects a record of type `Record` to be passed as the record parameter. Thats why all record objects should be created using the `new Record()` syntax, where the Record type is imported from `corteza-js/compose/types`

The same applies to all of the types available (Namespace, Module, User...).
If a type exists it's most advisable to use it before passing it to a {APP_AUTOMATION} helper or API endpoint. 

[NOTE]
====
The respective types for each resource(compose, system...) are located in the `corteza-js/*resource*/types`
====

= Corteza-vue
This package includes the Vue.js components, plugins and mixins used across the {PRODUCT_NAME} web applications.

== Components
To minimize the size of a single web application, shared components are placed into the corteza-vue package.

List of shared components::
  - Permissions Button/Modal. Used to manage permissions of different resources.
  - Developer authentication screen. Used for development authentication.
  - File preview
  - Inputs (DateTime, Confirmation)
  - Toasts. Used for notifications.

[NOTE]
====
All of the above components are located in the `corteza-vue/components` directory.
====

== Plugins
They are used as Vue.js Plugins in different {PRODUCT_NAME} web applications.

List of plugins:: 
  - {PRODUCT_NAME} API plugin used to initialize API clients
  - Reminder plugin that provides a way to manage reminders
  - Auth plugin, introduces authentication logic
  - Settings plugin, used to fetch settings for different resources

[NOTE]
====
All of the above plugins are located in the `corteza-vue/plugins` directory.
====

== Mixins
They are used as Vue.js mixins to extend the logic of components.

List of mixins::
  - {APP_AUTOMATION} mixin that registers server scripts to UIHooks
  - File type validation

[NOTE]
====
All of the above mixins are located in the `corteza-vue/plugins` directory.
====