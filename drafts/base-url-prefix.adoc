= Running Corteza in (virtual) subdirectory

== Corteza Server changes
Some setups require Corteza to run in a subdirectory you can (virtually) move it.

This is achieved with the `HTTP_BASE_URL` environmental variable.

Setting this to values like `/sub` or `/sub/foo/bar` will move most of the endpoints (api, webapps, auth) and duplicate others (`/healthcheck`, `__routes`; when enabled).

Development endpoints like `/__profiler`, `/__eventbus`, `/__corredor` are kept on the root.


== Corteza Web applications

Web application orient themselves based on the value of `<base>` tag in the `index.html`.
This orientation is needed for accessing resources (images, styles, scripts) using relative path and for constructing authentication redirection links.

When they are served via Corteza webserver these two files are autogenerated, no changes are needed.

If web applications are served directly without the help of the Corteza server and from a subdirectory, `index.html` needs to be modified for **each** application.

[cols="a,m"]
|===
|Web application|base tag in `index.html`

| Corteza One
| <base href="/sub/dir/">

| Corteza Admin
| <base href="/sub/dir/admin/">

| Corteza Compose
| <base href="/sub/dir/webapp/">

| Corteza Workflow
| <base href="/sub/dir/admin/">
|===
